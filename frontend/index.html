<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AQI Prediction System - 1-48 Hour Forecast</title>
    <!-- Simple inline favicon to avoid 404s on /favicon.ico -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%F0%9F%8C%8D%3C/text%3E%3C/svg%3E">
    <link rel="stylesheet" href="styles.css">
    <!-- Pin Plotly to an explicit modern version to avoid 'latest' deprecation warnings -->
    <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üåç AQI Prediction System</h1>
            <p>1-48 Hour Air Quality Forecasting for 56 Indian Cities</p>
        </header>
        
        <nav class="navbar">
            <div class="nav-content">
                <select id="citySelect" class="city-select">
                    <option value="">Select a city...</option>
                </select>
                <select id="hoursSelect" class="hours-select">
                    <option value="6">6 Hours Ahead</option>
                    <option value="12">12 Hours Ahead</option>
                    <option value="24" selected>24 Hours Ahead</option>
                    <option value="48">48 Hours Ahead</option>
                </select>
                <button id="refreshBtn" class="btn btn-primary">Refresh Forecast</button>
            </div>
        </nav>
        
        <main class="main-content">
            <!-- Current AQI vs Predicted AQI Comparison -->
            <section class="prediction-comparison">
                <div class="card">
                    <h2>üìä Current vs Predicted AQI</h2>
                    <div class="comparison-grid">
                        <div class="comparison-item current">
                            <div class="label">Current AQI</div>
                            <div id="currentAqiValue" class="value large">--</div>
                            <div id="currentAqiStatus" class="status">--</div>
                            <div class="timestamp" id="currentTimestamp">--</div>
                        </div>
                        <div class="comparison-arrow">‚Üí</div>
                        <div class="comparison-item predicted">
                            <div class="label">Predicted AQI (<span id="predictionHours">24</span>h)</div>
                            <div id="predictedAqiValue" class="value large">--</div>
                            <div id="predictedAqiStatus" class="status">--</div>
                            <div class="confidence">Confidence: <span id="confidenceValue">--</span>%</div>
                        </div>
                    </div>
                    <div class="prediction-change">
                        <div id="aqiChange" class="change-indicator">--</div>
                    </div>
                </div>
            </section>

            <!-- 48-Hour Prediction Chart -->
            <section class="charts-section">
                <div class="card full-width">
                    <h2>üîÆ 48-Hour AQI Prediction Forecast</h2>
                    <div class="chart-controls">
                        <label>
                            <input type="checkbox" id="showHistorical" checked> Show Historical Data
                        </label>
                        <label>
                            <input type="checkbox" id="showConfidence" checked> Show Confidence Interval
                        </label>
                    </div>
                    <div id="forecastChart" class="chart large-chart"></div>
                </div>
            </section>

            <!-- Pollutant Predictions -->
            <section class="pollutants-section">
                <div class="card">
                    <h2>üß™ Current Pollutant Levels</h2>
                    <div class="pollutants-grid">
                        <div class="pollutant-item">
                            <span class="label">PM2.5</span>
                            <span id="pm25Value" class="value">--</span>
                            <span class="unit">¬µg/m¬≥</span>
                        </div>
                        <div class="pollutant-item">
                            <span class="label">PM10</span>
                            <span id="pm10Value" class="value">--</span>
                            <span class="unit">¬µg/m¬≥</span>
                        </div>
                        <div class="pollutant-item">
                            <span class="label">NO‚ÇÇ</span>
                            <span id="no2Value" class="value">--</span>
                            <span class="unit">¬µg/m¬≥</span>
                        </div>
                        <div class="pollutant-item">
                            <span class="label">SO‚ÇÇ</span>
                            <span id="so2Value" class="value">--</span>
                            <span class="unit">¬µg/m¬≥</span>
                        </div>
                        <div class="pollutant-item">
                            <span class="label">CO</span>
                            <span id="coValue" class="value">--</span>
                            <span class="unit">¬µg/m¬≥</span>
                        </div>
                        <div class="pollutant-item">
                            <span class="label">O‚ÇÉ</span>
                            <span id="o3Value" class="value">--</span>
                            <span class="unit">¬µg/m¬≥</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Hourly Predictions Table -->
            <section class="hourly-predictions">
                <div class="card">
                    <h2>‚è∞ Hourly Predictions (Next 24 Hours)</h2>
                    <div class="table-container">
                        <table id="hourlyTable">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>Predicted AQI</th>
                                    <th>Category</th>
                                    <th>Change</th>
                                </tr>
                            </thead>
                            <tbody id="hourlyTableBody">
                                <tr><td colspan="4" class="no-data">Loading predictions...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Historical vs Predicted Comparison -->
            <section class="charts-section">
                <div class="card">
                    <h2>üìà Historical AQI Trend (7 Days)</h2>
                    <div id="historicalChart" class="chart"></div>
                </div>
            </section>
            
            <section class="metrics-section">
                <div class="card">
                    <h2>üéØ Prediction Model Performance</h2>
                    <div class="model-selector">
                        <label>Active Model: <strong id="activeModel">XGBoost</strong></label>
                    </div>
                    <div id="metricsContainer" class="metrics-grid"></div>
                </div>
            </section>
        </main>
    </div>
    
    <script src="config.js"></script>
    <script src="script.js"></script>
</body>
</html>